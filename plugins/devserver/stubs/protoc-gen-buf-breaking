#!/bin/sh
# Get the directory where this script lives
DIR="$(dirname "$(readlink -f "$0")")" 

# Check for Alpine and prefer musl variant if available
if [ -f /etc/alpine-release ] && [ -f "$DIR/protoc-gen-buf-breaking.musl.toml" ]; then
    mise trust -y -a -q .
    MISE_LOCKED=0 exec mise tool-stub "$DIR/protoc-gen-buf-breaking.musl.toml" "$@"
else
    mise trust -y -a -q .
    MISE_LOCKED=0 exec mise tool-stub "$DIR/protoc-gen-buf-breaking.toml" "$@"
fi
